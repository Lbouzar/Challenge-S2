<?php if (isset($menu) && !empty($menu))
  $this->modal("navbar", $menu); ?>

<main class="recipe-view">
  <h1><?php echo $recipe[0]["title"] ?></h1>
  <div class="img-container">
    <img src="<?php getenv('HTTP_HOST') ?>/public/assets/images/<?= $recipe[0]["image"] ?>" alt="thumbnail">
  </div>
  <p class="presentation"><?php echo $recipe[0]["presentation"] ?></p>
  <div class="layer">
    <span>Ingrédients</span>
  </div>
  <div class="ingredients">
    <?php
    $ingredients = explode(" / ", $recipe[0]["ingredients"]);
    foreach ($ingredients as $ingredient) {
      $ingredients = trim($ingredient);
      $span = "<span>· $ingredient</span>";
      echo $span;
    }
    ?>
  </div>
  <div class="layer">
    <span>Descriptif</span>
  </div>
  <div class="indications">
    <div class="indication">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M12 24C10.3556 24 8.80533 23.6836 7.34933 23.0507C5.89422 22.4169 4.62222 21.5556 3.53333 20.4667C2.44444 19.3778 1.58311 18.1058 0.949333 16.6507C0.316444 15.1947 0 13.6444 0 12C0 11.0222 0.111111 10.072 0.333333 9.14933C0.555556 8.22756 0.877778 7.36089 1.3 6.54933C1.72222 5.73867 2.228 4.98356 2.81733 4.284C3.40578 3.58356 4.06667 2.95556 4.8 2.4L13.8667 11.4667L12 13.3333L4.8 6.13333C4.13333 6.93333 3.61111 7.828 3.23333 8.81733C2.85556 9.80578 2.66667 10.8667 2.66667 12C2.66667 14.5778 3.57778 16.7778 5.4 18.6C7.22222 20.4222 9.42222 21.3333 12 21.3333C14.5778 21.3333 16.7778 20.4222 18.6 18.6C20.4222 16.7778 21.3333 14.5778 21.3333 12C21.3333 9.62222 20.5724 7.572 19.0507 5.84933C17.528 4.12756 15.6222 3.11111 13.3333 2.8V5.33333H10.6667V0H12C13.6444 0 15.1947 0.316444 16.6507 0.949333C18.1058 1.58311 19.3778 2.44444 20.4667 3.53333C21.5556 4.62222 22.4169 5.89422 23.0507 7.34933C23.6836 8.80533 24 10.3556 24 12C24 13.6444 23.6836 15.1947 23.0507 16.6507C22.4169 18.1058 21.5556 19.3778 20.4667 20.4667C19.3778 21.5556 18.1058 22.4169 16.6507 23.0507C15.1947 23.6836 13.6444 24 12 24ZM12 20C11.6222 20 11.3058 19.872 11.0507 19.616C10.7947 19.3609 10.6667 19.0444 10.6667 18.6667C10.6667 18.2889 10.7947 17.9724 11.0507 17.7173C11.3058 17.4613 11.6222 17.3333 12 17.3333C12.3778 17.3333 12.6947 17.4613 12.9507 17.7173C13.2058 17.9724 13.3333 18.2889 13.3333 18.6667C13.3333 19.0444 13.2058 19.3609 12.9507 19.616C12.6947 19.872 12.3778 20 12 20ZM18.6667 13.3333C18.2889 13.3333 17.9724 13.2053 17.7173 12.9493C17.4613 12.6942 17.3333 12.3778 17.3333 12C17.3333 11.6222 17.4613 11.3053 17.7173 11.0493C17.9724 10.7942 18.2889 10.6667 18.6667 10.6667C19.0444 10.6667 19.3609 10.7942 19.616 11.0493C19.872 11.3053 20 11.6222 20 12C20 12.3778 19.872 12.6942 19.616 12.9493C19.3609 13.2053 19.0444 13.3333 18.6667 13.3333ZM5.33333 13.3333C4.95556 13.3333 4.63867 13.2053 4.38267 12.9493C4.12756 12.6942 4 12.3778 4 12C4 11.6222 4.12756 11.3053 4.38267 11.0493C4.63867 10.7942 4.95556 10.6667 5.33333 10.6667C5.71111 10.6667 6.028 10.7942 6.284 11.0493C6.53911 11.3053 6.66667 11.6222 6.66667 12C6.66667 12.3778 6.53911 12.6942 6.284 12.9493C6.028 13.2053 5.71111 13.3333 5.33333 13.3333Z" fill="black" />
      </svg>
      <span class="indication-title">Préparation</span>
      <span><?php echo $recipe[0]["preparation_time"] ?> min</span>
    </div>
    <div class="indication">
      <svg width="24" height="22" viewBox="0 0 24 22" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M8.4 21.6V18H0V15.6H8.4C9.06 15.6 9.6252 15.8348 10.0956 16.3044C10.5652 16.7748 10.8 17.34 10.8 18V21.6H8.4ZM13.2 21.6V18C13.2 17.34 13.4352 16.7748 13.9056 16.3044C14.3752 15.8348 14.94 15.6 15.6 15.6H24V18H15.6V21.6H13.2ZM4.8 14.4C3.8 14.4 2.95 14.05 2.25 13.35C1.55 12.65 1.2 11.8 1.2 10.8V6H22.8V10.8C22.8 11.8 22.45 12.65 21.75 13.35C21.05 14.05 20.2 14.4 19.2 14.4H4.8ZM4.8 12H19.2C19.54 12 19.8248 11.8848 20.0544 11.6544C20.2848 11.4248 20.4 11.14 20.4 10.8V8.4H3.6V10.8C3.6 11.14 3.7148 11.4248 3.9444 11.6544C4.1748 11.8848 4.46 12 4.8 12ZM1.2 4.8V2.4H8.4V1.2C8.4 0.86 8.5152 0.5748 8.7456 0.3444C8.9752 0.1148 9.26 0 9.6 0H14.4C14.74 0 15.0252 0.1148 15.2556 0.3444C15.4852 0.5748 15.6 0.86 15.6 1.2V2.4H22.8V4.8H1.2Z" fill="black" />
      </svg>
      <span class="indication-title">Cuisson</span>
      <span><?php echo $recipe[0]["cooking_time"] ?> min</span>
    </div>
    <div class="indication">
      <svg width="24" height="22" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
        <path d="M416 0c-16 0-128 32-128 176v112c0 35.3 28.7 64 64 64h32v128c0 17.7 14.3 32 32 32s32-14.3 32-32V32c0-17.7-14.3-32-32-32zM64 16C64 7.8 57.9 1 49.7.1S34.2 4.6 32.4 12.5L2.1 148.8C.7 155.1 0 161.5 0 167.9c0 45.9 35.1 83.6 80 87.7V480c0 17.7 14.3 32 32 32s32-14.3 32-32V255.6c44.9-4.1 80-41.8 80-87.7 0-6.4-.7-12.8-2.1-19.1L191.6 12.5c-1.8-8-9.3-13.3-17.4-12.4S160 7.8 160 16v134.2c0 5.4-4.4 9.8-9.8 9.8-5.1 0-9.3-3.9-9.8-9L127.9 14.6C127.2 6.3 120.3 0 112 0S96.8 6.3 96.1 14.6L83.7 151c-.5 5.1-4.7 9-9.8 9-5.4 0-9.8-4.4-9.8-9.8V16zm48.3 152h-.6l.3-.7.3.7z" />
      </svg>
      <span class="indication-title">Prix</span>
      <span><?php echo $recipe[0]["price"] ?> €</span>
    </div>
  </div>
  <p class="description"><?php echo $recipe[0]["description"] ?></p>
  <div class="layer">
    <span>Commentaires</span>
  </div>
  <?php if (isset($form)):?>
    <?php if (isset($formErrors)): ?>
      $this->modal("errors", $formErrors);
    <?php endif; ?>
    <?php $this->modal("form", $form); ?>
  <?php endif ?>
  <div class="comment-list">
    <?php foreach ($comments as $comment) :
      $this->modal("comment", $comment); ?>
    <?php endforeach ?>
  </div>
</main>